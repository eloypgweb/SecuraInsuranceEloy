<div class="welcome-section">
  <h1 class="title">Bienvenido a tu área personal</h1>
  <p class="subtitle mt-5">
    ¡Gracias a ti más personas pueden disfrutar de una vida más segura!
  </p>
</div>

<div class="todo">
  <h3 class="">Próximas renovaciones</h3>
  <div>
    <table
      mat-table
      [dataSource]="detalles1.instalments"
      class="mat-elevation-z8"
    >
      <!-- No. de póliza Column -->
      <ng-container matColumnDef="nPolicy">
        <th mat-header-cell *matHeaderCellDef>No. de póliza</th>
        <td mat-cell *matCellDef="let element">{{ detalles1.nPolicy }}</td>
      </ng-container>

      <!-- Nombre del riesgo Column -->
      <ng-container matColumnDef="riskName">
        <th mat-header-cell *matHeaderCellDef>Nombre del riesgo</th>
        <td mat-cell *matCellDef="let element">{{ detalles1.riskName }}</td>
      </ng-container>

      <!-- Fecha de contrato Column -->
      <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef>Fecha de contrato</th>
        <td mat-cell *matCellDef="let element">{{ element.startDate }}</td>
      </ng-container>

      <!-- Fecha de vencimiento Column -->
      <ng-container matColumnDef="endDate">
        <th mat-header-cell *matHeaderCellDef>Fecha de vencimiento</th>
        <td mat-cell *matCellDef="let element">{{ element.endDate }}</td>
      </ng-container>

      <!-- Importe Column -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Importe</th>
        <td mat-cell *matCellDef="let element">{{ element.amount }} €</td>
      </ng-container>

      <!-- Estado de la póliza Column -->
      <ng-container matColumnDef="state">
        <th mat-header-cell *matHeaderCellDef>Estado de la póliza</th>
        <td mat-cell *matCellDef="let element">
          <div
            [ngClass]="
              element.state === 'pagada'
                ? 'bg-green-100 text-green-700'
                : 'bg-yellow-100 text-gray-600'
            "
            class="rounded-lg p-1 inline-block"
          >
            <ng-container *ngIf="element.state === 'pagada'; else pendiente">
              <ng-icon class="mr-2" name="bootstrapCheck2"></ng-icon>
              Pagada
            </ng-container>
            <ng-template #pendiente>
              <ng-icon class="mr-2" name="bootstrapClock"></ng-icon>
              Pendiente
            </ng-template>
          </div>
        </td>
      </ng-container>

      <tr
        mat-header-row
        *matHeaderRowDef="[
          'nPolicy',
          'riskName',
          'startDate',
          'endDate',
          'amount',
          'state'
        ]"
      ></tr>
      <tr
        mat-row
        *matRowDef="
          let row;
          columns: [
            'nPolicy',
            'riskName',
            'startDate',
            'endDate',
            'amount',
            'state'
          ]
        "
      ></tr>
    </table>
  </div>
</div>

<div class="vertodas">
  <a mat-button routerLink="/renovaciones">Ver todas</a>
</div>

<div>
  <h3 class="mt-5">Clientes Potenciales</h3>
  <div class="clientesPotenciales grid grid-cols-1 md:grid-cols-2 gap-4">
    <ng-container *ngFor="let cliente of clipot.slice(0, 2); let i = index">
      <div class="card p-4 shadow-lg rounded-lg border">
        <div class="flex justify-between items-center mb-4">
          <h3 class="nombre">
            {{ cliente.personalData.name }} {{ cliente.personalData.surname }}
          </h3>
          <button
            mat-icon-button
            aria-label="Eliminar"
            (click)="eliminarCliente(i)"
          >
            <ng-icon class="iconos" name="bootstrapTrash"></ng-icon>
          </button>
        </div>
        <div class="praof">
          <p class="mb-1">Producto a ofrecer: {{ cliente.offerProduct }}</p>
        </div>

        <div class="bodyBold infoss flex mb-2">
          <p class="mr-4">Email: {{ cliente.personalData.email }}</p>
          <p>Teléfono: {{ cliente.personalData.phone | formatoTelefono }}</p>
        </div>
      </div>
    </ng-container>
  </div>
</div>
